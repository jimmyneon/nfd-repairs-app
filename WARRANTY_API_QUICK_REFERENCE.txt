â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  WARRANTY API - QUICK REFERENCE FOR WEBSITE TEAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ API ENDPOINT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
POST https://nfd-repairs-app.vercel.app/api/warranty-tickets

ğŸ”‘ GET YOUR API KEY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Run this in Supabase SQL Editor:

    SELECT value FROM admin_settings WHERE key = 'warranty_api_key';

Or once deployed: Settings â†’ Admin Settings in the repair app

ğŸ“¤ MINIMUM REQUEST (REQUIRED FIELDS ONLY)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Headers:
    Content-Type: application/json
    X-API-KEY: your-api-key-here

Body:
{
  "customer": {
    "name": "John Smith",
    "phone": "+447410381247"
  },
  "issue": {
    "description": "Screen still cracked after repair"
  }
}

ğŸ“¤ FULL REQUEST (ALL OPTIONAL FIELDS)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{
  "source": "website",
  "submittedAt": "2024-02-23T10:00:00Z",
  "customer": {
    "name": "John Smith",
    "phone": "+447410381247",
    "email": "john@example.com"
  },
  "repair": {
    "jobId": "uuid-if-known",
    "reference": "NFD-2024-001",
    "deviceModel": "iPhone 14 Pro"
  },
  "issue": {
    "description": "Screen still cracked after repair",
    "category": "warranty"
  },
  "attachments": [
    {
      "url": "https://your-cdn.com/photo.jpg",
      "type": "image/jpeg",
      "filename": "photo.jpg"
    }
  ],
  "metadata": {
    "ip": "1.2.3.4",
    "userAgent": "Mozilla/5.0..."
  }
}

ğŸ“¥ SUCCESS RESPONSE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{
  "ticketId": "550e8400-e29b-41d4-a716-446655440000",
  "ticketRef": "WRT-2024-0001",
  "matchedJobId": "uuid-or-null",
  "matchConfidence": "high|medium|low|none",
  "status": "NEW"
}

ğŸ§ª TEST WITH CURL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
curl -X POST https://nfd-repairs-app.vercel.app/api/warranty-tickets \
  -H "Content-Type: application/json" \
  -H "X-API-KEY: your-api-key-here" \
  -d '{
    "customer": {
      "name": "Test Customer",
      "phone": "+447410381247"
    },
    "issue": {
      "description": "Test warranty claim"
    }
  }'

ğŸ”’ SECURITY REQUIREMENTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ MUST call API from server-side (PHP/Node/Python)
âœ“ NEVER expose API key in client-side JavaScript
âœ“ Store API key in environment variables
âœ“ Validate all form inputs before sending
âœ“ Rate limit form submissions

ğŸ“ PHONE NUMBER FORMATS (ALL ACCEPTED)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
+447410381247
07410381247
+44 7410 381247
07410 381 247

ğŸ¯ AUTO-MATCHING LOGIC
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Job ID provided â†’ High confidence
2. Job reference provided â†’ High confidence
3. Phone + recent job (90 days) â†’ Medium/Low confidence
4. No match â†’ Ticket created anyway (confidence: none)

âŒ ERROR RESPONSES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
401: Missing or invalid API key
400: Missing required fields
500: Server error

ğŸ“š FULL DOCUMENTATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
See WEBSITE_WARRANTY_API.md for:
- Complete field descriptions
- Code examples (JavaScript, PHP)
- Error handling
- Idempotency
- Attachment handling
- Integration checklist

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
